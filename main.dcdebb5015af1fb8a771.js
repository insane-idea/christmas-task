(()=>{"use strict";const t=function(){function t(t,e,n){this.container=document.createElement(t),this.container.className=e,this.container.id=n||""}return t.prototype.createContent=function(t){this.container.insertAdjacentHTML("beforeend",t)},t.prototype.setLocalStorage=function(t,e){t&&e&&localStorage.setItem(t,e)},t.prototype.render=function(){return this.container},t.textObject={},t}();var e,n=(e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},e(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)});const o=function(t){function e(e,n,o){return t.call(this,e,n,o)||this}return n(e,t),e.prototype.initStartButton=function(){this.container.querySelector(".main-page__start-btn").addEventListener("click",(function(){window.location.hash="toys-page"}))},e.prototype.render=function(){return this.createContent(e.textObject.HTMLContent),this.initStartButton(),this.container},e.textObject={HTMLContent:'\n  <div class="content__container">\n    <div class="main-page__container">\n      <div class="main-page__title-container">\n        <h1 class="main-page__title">Новогодняя игра <br /><span class="wrap">«Наряди ёлку»</span></h1>\n        <button class="main-page__start-btn">Начать</button>\n      </div>\n    </div>\n  </div>\n'},e}(t),a=[{num:"1",name:"Большой шар с рисунком",count:"2",year:"1960",shape:"шар",color:"желтый",size:"большой",favorite:!1},{num:"2",name:"Зелёный шар с цветами",count:"5",year:"2000",shape:"шар",color:"зелёный",size:"большой",favorite:!1},{num:"3",name:"Красный матовый шар",count:"3",year:"1990",shape:"шар",color:"красный",size:"большой",favorite:!1},{num:"4",name:"Сосулька красная",count:"2",year:"1980",shape:"фигурка",color:"красный",size:"большой",favorite:!1},{num:"5",name:"Красный виноград",count:"4",year:"1980",shape:"фигурка",color:"красный",size:"средний",favorite:!0},{num:"6",name:"Красный шар с рисунком",count:"6",year:"2010",shape:"шар",color:"красный",size:"большой",favorite:!1},{num:"7",name:"Молочно-белый шар",count:"12",year:"1960",shape:"шар",color:"белый",size:"средний",favorite:!0},{num:"8",name:"Красный шар",count:"10",year:"2010",shape:"шар",color:"красный",size:"большой",favorite:!1},{num:"9",name:"Колокольчик старинный",count:"2",year:"1950",shape:"колокольчик",color:"белый",size:"большой",favorite:!1},{num:"10",name:"Белый шар ретро",count:"7",year:"1960",shape:"шар",color:"белый",size:"большой",favorite:!1},{num:"11",name:"Шишка еловая белая",count:"11",year:"1960",shape:"шишка",color:"белый",size:"малый",favorite:!1},{num:"12",name:"Белый шар с цветами",count:"5",year:"1980",shape:"шар",color:"белый",size:"большой",favorite:!1},{num:"13",name:"Шар расписной Река",count:"3",year:"1970",shape:"шар",color:"синий",size:"большой",favorite:!0},{num:"14",name:"Шар расписной Деревня",count:"4",year:"1970",shape:"шар",color:"синий",size:"большой",favorite:!0},{num:"15",name:"Колокольчик расписной",count:"3",year:"1970",shape:"колокольчик",color:"синий",size:"средний",favorite:!1},{num:"16",name:"Шишка расписная Пейзаж",count:"3",year:"1970",shape:"шишка",color:"синий",size:"средний",favorite:!0},{num:"17",name:"Шишка расписная",count:"7",year:"1970",shape:"шишка",color:"красный",size:"средний",favorite:!1},{num:"18",name:"Желтый шар с бантом",count:"2",year:"2010",shape:"шар",color:"желтый",size:"большой",favorite:!1},{num:"19",name:"Желтый шар с паетками",count:"12",year:"1980",shape:"шар",color:"желтый",size:"большой",favorite:!1},{num:"20",name:"Красный шар с бантом",count:"8",year:"1950",shape:"шар",color:"красный",size:"средний",favorite:!0},{num:"21",name:"Красный шар с звёздами",count:"4",year:"1970",shape:"шар",color:"красный",size:"большой",favorite:!0},{num:"22",name:"Шишка еловая золотая",count:"11",year:"1990",shape:"шишка",color:"желтый",size:"малый",favorite:!1},{num:"23",name:"Колокольчик старинный",count:"9",year:"1950",shape:"колокольчик",color:"желтый",size:"большой",favorite:!1},{num:"24",name:"Снежинка изящная",count:"1",year:"1940",shape:"снежинка",color:"белый",size:"большой",favorite:!1},{num:"25",name:"Розовый шар с блёстками",count:"12",year:"2010",shape:"шар",color:"красный",size:"большой",favorite:!1},{num:"26",name:"Рубиново-золотой шар",count:"8",year:"1960",shape:"шар",color:"желтый",size:"большой",favorite:!1},{num:"27",name:"Красный шар с узором",count:"4",year:"2010",shape:"шар",color:"красный",size:"большой",favorite:!1},{num:"28",name:"Бордовый шар с узором",count:"10",year:"2010",shape:"шар",color:"красный",size:"большой",favorite:!1},{num:"29",name:"Старинный шар с цветами",count:"5",year:"1950",shape:"шар",color:"желтый",size:"большой",favorite:!0},{num:"30",name:"Старинный шар с узором",count:"8",year:"1950",shape:"шар",color:"желтый",size:"большой",favorite:!0},{num:"31",name:"Красный шар с блёстками",count:"8",year:"2010",shape:"шар",color:"красный",size:"большой",favorite:!1},{num:"32",name:"Синий шар Вселенная",count:"11",year:"1970",shape:"шар",color:"синий",size:"большой",favorite:!1},{num:"33",name:"Синий шар со снежинкой",count:"6",year:"2010",shape:"шар",color:"синий",size:"средний",favorite:!1},{num:"34",name:"Зелёный  шар с узором",count:"8",year:"2010",shape:"шар",color:"зелёный",size:"большой",favorite:!1},{num:"35",name:"Фигурка Лис в шарфе",count:"8",year:"1950",shape:"фигурка",color:"желтый",size:"средний",favorite:!0},{num:"36",name:"Сиреневый шар Метель",count:"1",year:"2000",shape:"шар",color:"синий",size:"большой",favorite:!1},{num:"37",name:"Зелёный  шар Метель",count:"6",year:"2000",shape:"шар",color:"зелёный",size:"большой",favorite:!1},{num:"38",name:"Голубой  шар Метель",count:"6",year:"2000",shape:"шар",color:"синий",size:"большой",favorite:!1},{num:"39",name:"Красная снежинка",count:"6",year:"1990",shape:"снежинка",color:"красный",size:"большой",favorite:!1},{num:"40",name:"Снежинка золотая",count:"12",year:"2020",shape:"снежинка",color:"желтый",size:"большой",favorite:!1},{num:"41",name:"Снежинка арктическая",count:"11",year:"2020",shape:"снежинка",color:"белый",size:"большой",favorite:!1},{num:"42",name:"Зелёный шар",count:"10",year:"1980",shape:"шар",color:"зелёный",size:"средний",favorite:!1},{num:"43",name:"Снежинка двухцветная",count:"6",year:"1960",shape:"снежинка",color:"красный",size:"большой",favorite:!1},{num:"44",name:"Фигурка Ангела",count:"11",year:"1940",shape:"фигурка",color:"красный",size:"средний",favorite:!0},{num:"45",name:"Снежинка новогодняя",count:"1",year:"1980",shape:"снежинка",color:"белый",size:"большой",favorite:!1},{num:"46",name:"Фигурка Мухомор",count:"10",year:"1950",shape:"фигурка",color:"красный",size:"малый",favorite:!1},{num:"47",name:"Фигурка Колодец",count:"6",year:"1950",shape:"фигурка",color:"красный",size:"малый",favorite:!1},{num:"48",name:"Желтый шар с бантом",count:"6",year:"1960",shape:"шар",color:"желтый",size:"большой",favorite:!1},{num:"49",name:"Снежинка с бирюзой",count:"4",year:"1980",shape:"снежинка",color:"желтый",size:"большой",favorite:!1},{num:"50",name:"Колокольчик большой",count:"3",year:"2020",shape:"колокольчик",color:"красный",size:"большой",favorite:!1},{num:"51",name:"Шишка с изморозью",count:"12",year:"1970",shape:"шишка",color:"красный",size:"малый",favorite:!1},{num:"52",name:"Красный шар с надписью",count:"12",year:"1990",shape:"шар",color:"красный",size:"большой",favorite:!0},{num:"53",name:"Снежинка серебристая",count:"6",year:"2020",shape:"снежинка",color:"белый",size:"большой",favorite:!1},{num:"54",name:"Зелёный шар с рисунком",count:"6",year:"2010",shape:"шар",color:"зелёный",size:"большой",favorite:!1},{num:"55",name:"Пряничный домик",count:"1",year:"1940",shape:"фигурка",color:"желтый",size:"большой",favorite:!1},{num:"56",name:"Пряничный теремок",count:"1",year:"1940",shape:"фигурка",color:"желтый",size:"малый",favorite:!1},{num:"57",name:"Пряничная избушка",count:"1",year:"1940",shape:"фигурка",color:"желтый",size:"средний",favorite:!1},{num:"58",name:"Фигурка белого медведя",count:"2",year:"1980",shape:"фигурка",color:"белый",size:"средний",favorite:!1},{num:"59",name:"Желтый шар с надписью",count:"10",year:"1990",shape:"шар",color:"желтый",size:"средний",favorite:!1},{num:"60",name:"Фигурка Голубь",count:"12",year:"1940",shape:"фигурка",color:"белый",size:"средний",favorite:!0}];var s=new Set;const r=function(){function t(){}return t.prototype.startAnimation=function(t){var e=this;window.addEventListener("scroll",(function(){e.animationOnScroll(t)}))},t.prototype.animationOnScroll=function(t){var e,n,o,a,s=t.offsetHeight,r=(e=t,n=e.getBoundingClientRect(),o=window.scrollX||document.documentElement.scrollLeft,a=window.scrollY||document.documentElement.scrollTop,{top:n.top+a,left:n.left+o}).top,i=window.innerHeight-s/4;s>window.innerHeight&&(i=window.innerHeight-window.innerHeight/4),window.scrollY>r-i&&window.scrollY<r+s&&t.classList.add("active")},t}(),i=function(){function t(t,e,n,o){this.initialData=t,this.cardData=e,this.drawContainer=n,this.favoriteCountContainer=o,this.animation=new r}return t.prototype.updateFavoritesQuantity=function(t){t.textContent=s.size.toString()},t.prototype.filterByOrder=function(t,e){var n=t;return 0==e?n.sort((function(t,e){var n=t.name,o=e.name;return n<o?-1:n>o?1:0})):1==e?n.sort((function(t,e){var n=t.name,o=e.name;return n<o?1:n>o?-1:0})):2==e?n.sort((function(t,e){return+t.count-+e.count})):3==e&&n.sort((function(t,e){var n=+t.count;return+e.count-n})),n},t.prototype.createCard=function(t){var e=this,n='\n            <h3 class="card__title">'.concat(t.name,'</h3>\n            <div class="card__container">\n                <div class="card__interface">\n                    <img class="card__img" src="./assets/toys/').concat(t.num,'.png" alt="">\n                    <div class="card__ribbon"></div>\n                </div>\n                <div class="card__content">\n                    <p class="amount">Количество: <span class="amount-data">').concat(t.count,'</span> </p>\n                    <p class="year">Год покупки: <span class="year-data">').concat(t.year,'</span> </p>\n                    <p class="shape">Форма: <span class="shape-data">').concat(t.shape,'</span> </p>\n                    <p class="color">Цвет: <span class="color-data">').concat(t.color,'</span> </p>\n                    <p class="size">Размер: <span class="size-data">').concat(t.size,'</span> </p>\n                    <p class="favourite">Любимая: <span class="favourite-data">').concat(t.favorite?"да":"нет","</span> </p>\n                </div>\n            </div>\n        "),o=document.createElement("div");return o.className="card",o.dataset.num="".concat(t.num),o.innerHTML=n,setInterval((function(){e.animation.animationOnScroll(o)}),100),o},t.prototype.removeCards=function(t){t.innerHTML=""},t.prototype.sortFavorites=function(t,e){s.size<20?t.classList.contains("favorite")?(t.classList.remove("favorite"),s.delete(+t.dataset.num)):(t.classList.add("favorite"),s.add(+t.dataset.num)):t.classList.contains("favorite")?(t.classList.remove("favorite"),s.delete(+t.dataset.num)):alert("Извините, все слоты заполнены"),e.textContent=s.size.toString(),this.updateFavoritesQuantity(e)},t}();var c=function(){function t(t,e,n,o,a){this.buttons=t,this.shape=e?(new Set).add(e):new Set,this.color=n?(new Set).add(n):new Set,this.size=o?(new Set).add(o):new Set,this.favorite=a||!1}return t.prototype.toggleValueFilters=function(t){var e=document.querySelector(".favorite__check"),n=t.parentElement.className;"shape-select"===n&&(this.shape.has(t.dataset.filter)?(this.shape.delete(t.dataset.filter),t.classList.toggle("active-btn")):(this.shape.add(t.dataset.filter),t.classList.toggle("active-btn"))),"color-select"===n&&(this.color.has(t.dataset.filter)?(this.color.delete(t.dataset.filter),t.classList.toggle("active-btn")):(this.color.add(t.dataset.filter),t.classList.toggle("active-btn"))),"size-select"===n&&(this.size.has(t.dataset.filter)?(this.size.delete(t.dataset.filter),t.classList.toggle("active-btn")):(this.size.add(t.dataset.filter),t.classList.toggle("active-btn"))),"favorite-select"===n&&(this.favorite?(e.checked=!1,this.favorite=!1):(e.checked=!0,this.favorite=!0))},t}();const l=c;var u=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const d=function(t){function e(e,n,o){return t.call(this,e,n,o)||this}return u(e,t),e.prototype.changeBackgroundImage=function(){var t=this,e=Array.from(this.container.querySelector(".background-controls").children);e.length>0&&e.forEach((function(e){e.addEventListener("click",(function(){var n=new Image;n.src="./assets/bg/".concat(e.dataset.bg,".jpg"),n.onload=function(){t.container.querySelector(".tree-page__tree").style.backgroundImage="url(".concat(n.src,")")}}))}))},e.prototype.changeTree=function(){var t=this,e=Array.from(this.container.querySelector(".tree-controls").children);e.length>0&&e.forEach((function(e){e.addEventListener("click",(function(){var n=new Image;n.src="./assets/tree/".concat(e.dataset.tree,".png"),n.onload=function(){t.container.querySelector(".tree").style.backgroundImage="url(".concat(n.src,")")}}))}))},e.prototype.initSnow=function(){var t=document.querySelector(".tree-page__tree").querySelector(".snowfall")||null;if(t){var e=document.createElement("i");e.classList.add("fas"),e.classList.add("fa-snowflake"),e.style.left=Math.random()*t.getBoundingClientRect().width+"px",e.style.animationDuration=7*Math.random()+2+"s",e.style.opacity=Math.random().toString(),e.style.fontSize=10*Math.random()+10+"px",t.append(e),setTimeout((function(){e.remove()}),5e3)}},e.prototype.toggleSnow=function(){"disabled"==localStorage.getItem("snow")?(e.snowInterval=setInterval(this.initSnow,50),this.setLocalStorage("snow","enabled")):"enabled"==localStorage.getItem("snow")&&(clearInterval(e.snowInterval),this.setLocalStorage("snow","disabled"))},e.prototype.toggleSoundButtonImage=function(t){var e=this.container.querySelector(".sound-btn");"enabled"===t?e.style.backgroundImage="url('./assets/svg/audio.svg')":"disabled"===t&&(e.style.backgroundImage="url('./assets/svg/mute.svg')")},e.prototype.toggleMusic=function(){"disabled"==localStorage.getItem("music")?(e.audio.muted=!1,this.toggleSoundButtonImage("enabled"),this.setLocalStorage("music","enabled")):"enabled"==localStorage.getItem("music")&&(e.audio.muted=!0,this.toggleSoundButtonImage("disabled"),this.setLocalStorage("music","disabled"))},e.prototype.disableSnowAndSound=function(){e.snowInterval&&clearInterval(e.snowInterval),e.audio.muted=!0,localStorage.setItem("snow","disabled"),localStorage.setItem("music","disabled")},e.prototype.initLocalStorageData=function(){this.setLocalStorage()},e.prototype.setLocalStorage=function(t,e){localStorage.getItem("snow")||localStorage.setItem("snow","disabled"),localStorage.getItem("music")||localStorage.setItem("music","disabled"),t&&e&&localStorage.setItem(t,e)},e.prototype.initSecondaries=function(){var t=this,n=this.container.querySelector(".snow-btn"),o=this.container.querySelector(".sound-btn"),s=document.querySelector(".reset-ls");this.drawFavoriteToys(a),o.addEventListener("click",(function(){o&&t.toggleMusic()})),n.addEventListener("click",(function(){n&&t.toggleSnow()})),s.addEventListener("click",this.disableSnowAndSound),window.addEventListener("mousemove",this.disableSnowAndSound,{once:!0}),window.addEventListener("hashchange",this.disableSnowAndSound,{once:!0}),e.audio.play(),this.changeBackgroundImage(),this.changeTree()},e.prototype.drawFavoriteToys=function(t){var e=this.container.querySelector(".toys-choose");if(e)if(s.size>0)e.innerHTML="",s.forEach((function(n){var o=document.createElement("div"),a=document.createElement("p");o.classList.add("toy"),o.style.backgroundImage="url('./assets/toys/".concat(t[+n-1].num,".png')"),a.classList.add("toy__count"),a.innerHTML=t[+n-1].count.toString(),o.append(a),e.append(o)}));else{e.innerHTML="";for(var n=0;n<20;n++){var o=document.createElement("div"),a=document.createElement("p");o.classList.add("toy"),o.style.backgroundImage="url('./assets/toys/".concat(t[n].num,".png')"),a.classList.add("toy__count"),a.innerHTML=t[n].count.toString(),o.append(a),e.append(o)}}},e.prototype.render=function(){return this.createContent(e.textObject.HTMLContent),this.initLocalStorageData(),this.initSecondaries(),this.container},e.audio=document.querySelector(".audio"),e.textObject={HTMLContent:'\n  <div class="content__container">\n    <div class="tree-page__container">\n      <div class="tree-page__menu">\n        <div class="additional-controls">\n          <button class="btn sound-btn"></button>\n          <button class="btn snow-btn"></button>\n        </div>\n        <p class="tree-page__title">Выберите ёлку</p>\n        <div class="tree-controls">\n          <div class="btn btn-tree" data-tree="1"></div>\n          <div class="btn btn-tree" data-tree="2"></div>\n          <div class="btn btn-tree" data-tree="3"></div>\n          <div class="btn btn-tree" data-tree="4"></div>\n          <div class="btn btn-tree" data-tree="5"></div>\n          <div class="btn btn-tree" data-tree="6"></div>\n        </div>\n        <p class="tree-page__title">Выберите фон</p>\n        <div class="background-controls">\n          <div class="btn btn-bg" data-bg="1"></div>\n          <div class="btn btn-bg" data-bg="2"></div>\n          <div class="btn btn-bg" data-bg="3"></div>\n          <div class="btn btn-bg" data-bg="4"></div>\n          <div class="btn btn-bg" data-bg="5"></div>\n          <div class="btn btn-bg" data-bg="6"></div>\n          <div class="btn btn-bg" data-bg="7"></div>\n          <div class="btn btn-bg" data-bg="8"></div>\n          <div class="btn btn-bg" data-bg="9"></div>\n          <div class="btn btn-bg" data-bg="10"></div>\n        </div>\n        <p class="tree-page__title">Гирлянда</p>\n        <div class="garland-controls">\n          <button class="btn-garland btn-multicolor"></button>\n          <button class="btn-garland btn-red"></button>\n          <button class="btn-garland btn-blue"></button>\n          <button class="btn-garland btn-yellow"></button>\n          <button class="btn-garland btn-green"></button>\n          <div class="btn-switch-garland"></div>\n          \x3c!-- ! x5 + 1 --\x3e\n        </div>\n      </div>\n\n      <div class="tree-page__tree">\n        <div class="snowfall"></div>\n        <div class="tree"></div>\n      </div>\n\n      <div class="tree-page__toys">\n        <p class="tree-page__title">Игрушки</p>\n        <div class="toys-choose">\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          <div class="toy">\n            <p class="toy__count">2</p>\n          </div>\n          \x3c!--! fav.size or x20 --\x3e\n        </div>\n        <p class="tree-page__title">Вы нарядили</p>\n        <div class="game-result">\n          <div class="final-tree"></div>\n          <div class="final-tree"></div>\n          <div class="final-tree"></div>\n        </div>\n        <div class="progress-bar"></div>\n      </div>\n    </div>\n  </div>\n'},e}(t);var p=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const v=function(t){function e(e,n,o){var a=t.call(this,e,n,o)||this;return a.cards=new i,a.controlButtons=new l,a.animation=new r,a.tree=new d("article","content tree-page","toys-page"),a}return p(e,t),e.prototype.resetSort=function(t,e){var n=this.container.querySelector(".favorite__check");this.controlButtons.shape=new Set,this.controlButtons.color=new Set,this.controlButtons.size=new Set,this.controlButtons.favorite=!1,n.checked=!1,t.classList.remove("active-btn"),this.sortSelect=this.container.querySelector(".sort-select"),this._order=this.sortSelect.selectedIndex,this.sortSelect.options[0].selected="selected"},e.prototype.cardFilter=function(t){for(var e=Array.from(this.controlButtons.shape),n=Array.from(this.controlButtons.color),o=Array.from(this.controlButtons.size),a=this.controlButtons.favorite,s=Object.keys(t),r=!0,i=0;i<s.length;i++)if(a){if(!t.favorite){r=!1;break}}else if("shape"==s[i]){if(e.length>0&&e.indexOf(t.shape)<0){r=!1;break}}else if("color"==s[i]){if(n.length>0&&n.indexOf(t.color)<0){r=!1;break}}else{if("size"!=s[i])continue;if(o.length>0&&o.indexOf(t.size)<0){r=!1;break}}return r},e.prototype.initButtonsListener=function(t){var e=this,n=Array.prototype.slice.call(this.container.querySelector(".shape-select").querySelectorAll(".btn")),o=Array.prototype.slice.call(this.container.querySelector(".color-select").querySelectorAll(".btn")),a=Array.prototype.slice.call(this.container.querySelector(".size-select").querySelectorAll(".btn")),s=this.container.querySelector(".favorite__check"),r=n.concat(o,a,s),i=this.container.querySelector(".sort-select"),c=this.container.querySelector(".sort-reset");this.controlButtons.buttons=r,this.controlButtons.buttons.forEach((function(n){n.addEventListener("click",(function(){e.controlButtons.toggleValueFilters(n),e.drawCards(t,e._order)})),c.addEventListener("click",(function(){e.resetSort(n),e.drawCards(t,e._order)}))})),i.addEventListener("change",(function(){e._order=i.selectedIndex,e.drawCards(t,e._order)}))},e.prototype.showFavorites=function(){var t=this;s.forEach((function(e){var n=t.container.querySelector('.card[data-num="'.concat(e,'"]'));n&&n.classList.add("favorite")}))},e.prototype.drawCards=function(t,e){var n=this,o=this.container.querySelector(".cards-container"),a=document.querySelector(".toys-count");this.cards.removeCards(o);for(var s=this.cards.filterByOrder(t,e),r=function(t){var e=s[t];if(i.cardFilter(e)){var r=i.cards.createCard(e);o.insertAdjacentElement("beforeend",r),r.addEventListener("click",(function(){n.cards.sortFavorites(r,a)})),o.append(r)}},i=this,c=0;c<s.length;c++)r(c)},e.prototype.render=function(){return this.createContent(e.textObject.HTMLContent),this.initButtonsListener(a),this.drawCards(a),this.showFavorites(),this.container},e.textObject={HTMLContent:'\n  <div class="content__container">\n    <div class="toys-page__container">\n      <div class="filters">\n        <div class="value-filter">\n          <p class="filters-title">Фильтры по назначению</p>\n          <div class="shape-select">\n            Форма:\n            <button data-filter="шар" class="btn ball"></button>\n            <button data-filter="колокольчик" class="btn bell"></button>\n            <button data-filter="шишка" class="btn cone"></button>\n            <button data-filter="снежинка" class="btn snowflake"></button>\n            <button data-filter="фигурка" class="btn figurine"></button>\n          </div>\n          <div class="color-select">\n            Цвет:\n            <button data-filter="белый" class="btn white"></button>\n            <button data-filter="желтый" class="btn yellow"></button>\n            <button data-filter="красный" class="btn red"></button>\n            <button data-filter="синий" class="btn blue"></button>\n            <button data-filter="зелёный" class="btn green"></button>\n          </div>\n          <div class="size-select">\n            Размер:\n            <button data-filter="большой" class="btn large"></button>\n            <button data-filter="средний" class="btn middle"></button>\n            <button data-filter="малый" class="btn small"></button>\n          </div>\n          <div class="favorite-select">\n            Только любимые:\n            <input class="favorite__check" type="checkbox" />\n          </div>\n        </div>\n\n        <div class="range-filter">\n          <p class="filters-title">Фильтры по диапазону</p>\n          <p class="amount__title">Количество экземпляров:</p>\n          <div class="amount-filter">\n            <span class="amount__from">1</span>\n            <input class="amount__range" type="range" />\n            <span class="amount__to">12</span>\n          </div>\n          <p class="year__title">Год приобретения:</p>\n          <div class="year-filter">\n            <span class="year__from">1940</span>\n            <input class="year__range" type="range" />\n            <span class="year__to">2020</span>\n          </div>\n        </div>\n\n        <div class="sort-filter">\n          <p class="filters-title">Сортировка</p>\n          <div class="sort-filter__container">\n            <select name="sort-select" id="sort-select" class="sort-select">\n              <option value="sort-name-max">По названию от «А» до «Я»</option>\n              <option value="sort-name-min">По названию от «Я» до «А»</option>\n              <option value="sort-count-max">По возрастанию количества</option>\n              <option value="sort-count-min">По убыванию количества</option>\n            </select>\n            <button class="sort-reset">Сброс фильтров</button>\n          </div>\n        </div>\n      </div>\n\n      <div class="cards-container"></div>\n    </div>\n  </div>\n'},e}(t);var f=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const h=function(t){function e(e,n,o){return t.call(this,e,n,o)||this}return f(e,t),e.prototype.render=function(){return this.createContent(e.textObject.HTMLContent),this.container},e.textObject={HTMLContent:'\n  <div class="error">\n    Sorry, the requested page was not found on this website... :(\n  </div>\n'},e}(t);(new(function(){function t(){this.initialPage=new o("article","content main-page","main-page"),this.ToysPage=new v("article","content toys-page","toys-page"),this.TreePage=new d("article","content tree-page","toys-page")}return t.removeHash=function(){history.pushState("",document.title,window.location.pathname+window.location.search)},t.renderNewPage=function(e){t.container.innerHTML="";var n=null;if("#"==e||""==window.location.hash?(n=new o("article","content main-page",e),t.removeHash()):n="toys-page"==e?new v("article","content toys-page",e):"tree-page"==e?new d("article","content tree-page",e):new h("article","content error-page"),n){var a=n.render();t.container.append(a)}},t.prototype.changeRoute=function(){window.addEventListener("hashchange",(function(){var e=window.location.hash.slice(1);t.renderNewPage(e)}))},t.prototype.run=function(){var e=this.initialPage.render();t.container.innerHTML="",t.container.insertAdjacentElement("beforeend",e),t.removeHash(),this.changeRoute()},t.container=document.getElementById("app"),t}())).run()})();